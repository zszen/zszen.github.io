var __reflect=(this&&this.__reflect)||function(p,c,t){p.__class__=c,t?t.push(c):t=[c],p.__types__=p.__types__?t.concat(p.__types__):t};var __extends=this&&this.__extends||function __extends(t,e){function r(){this.constructor=t}for(var i in e){e.hasOwnProperty(i)&&(t[i]=e[i])}r.prototype=e.prototype,t.prototype=new r()};var egret;(function(egret){var Ease=(function(){function Ease(){egret.$error(1014)}Ease.get=function(amount){if(amount<-1){amount=-1}if(amount>1){amount=1}return function(t){if(amount==0){return t}if(amount<0){return t*(t*-amount+1+amount)}return t*((2-t)*amount+(1-amount))}};Ease.getPowIn=function(pow){return function(t){return Math.pow(t,pow)}};Ease.getPowOut=function(pow){return function(t){return 1-Math.pow(1-t,pow)}};Ease.getPowInOut=function(pow){return function(t){if((t*=2)<1){return 0.5*Math.pow(t,pow)}return 1-0.5*Math.abs(Math.pow(2-t,pow))}};Ease.sineIn=function(t){return 1-Math.cos(t*Math.PI/2)};Ease.sineOut=function(t){return Math.sin(t*Math.PI/2)};Ease.sineInOut=function(t){return -0.5*(Math.cos(Math.PI*t)-1)};Ease.getBackIn=function(amount){return function(t){return t*t*((amount+1)*t-amount)}};Ease.getBackOut=function(amount){return function(t){return(--t*t*((amount+1)*t+amount)+1)}};Ease.getBackInOut=function(amount){amount*=1.525;return function(t){if((t*=2)<1){return 0.5*(t*t*((amount+1)*t-amount))}return 0.5*((t-=2)*t*((amount+1)*t+amount)+2)}};Ease.circIn=function(t){return -(Math.sqrt(1-t*t)-1)};Ease.circOut=function(t){return Math.sqrt(1-(--t)*t)};Ease.circInOut=function(t){if((t*=2)<1){return -0.5*(Math.sqrt(1-t*t)-1)}return 0.5*(Math.sqrt(1-(t-=2)*t)+1)};Ease.bounceIn=function(t){return 1-Ease.bounceOut(1-t)};Ease.bounceOut=function(t){if(t<1/2.75){return(7.5625*t*t)}else{if(t<2/2.75){return(7.5625*(t-=1.5/2.75)*t+0.75)}else{if(t<2.5/2.75){return(7.5625*(t-=2.25/2.75)*t+0.9375)}else{return(7.5625*(t-=2.625/2.75)*t+0.984375)}}}};Ease.bounceInOut=function(t){if(t<0.5){return Ease.bounceIn(t*2)*0.5}return Ease.bounceOut(t*2-1)*0.5+0.5};Ease.getElasticIn=function(amplitude,period){var pi2=Math.PI*2;return function(t){if(t==0||t==1){return t}var s=period/pi2*Math.asin(1/amplitude);return -(amplitude*Math.pow(2,10*(t-=1))*Math.sin((t-s)*pi2/period))}};Ease.getElasticOut=function(amplitude,period){var pi2=Math.PI*2;return function(t){if(t==0||t==1){return t}var s=period/pi2*Math.asin(1/amplitude);return(amplitude*Math.pow(2,-10*t)*Math.sin((t-s)*pi2/period)+1)}};Ease.getElasticInOut=function(amplitude,period){var pi2=Math.PI*2;return function(t){var s=period/pi2*Math.asin(1/amplitude);if((t*=2)<1){return -0.5*(amplitude*Math.pow(2,10*(t-=1))*Math.sin((t-s)*pi2/period))}return amplitude*Math.pow(2,-10*(t-=1))*Math.sin((t-s)*pi2/period)*0.5+1}};Ease.quadIn=Ease.getPowIn(2);Ease.quadOut=Ease.getPowOut(2);Ease.quadInOut=Ease.getPowInOut(2);Ease.cubicIn=Ease.getPowIn(3);Ease.cubicOut=Ease.getPowOut(3);Ease.cubicInOut=Ease.getPowInOut(3);Ease.quartIn=Ease.getPowIn(4);Ease.quartOut=Ease.getPowOut(4);Ease.quartInOut=Ease.getPowInOut(4);Ease.quintIn=Ease.getPowIn(5);Ease.quintOut=Ease.getPowOut(5);Ease.quintInOut=Ease.getPowInOut(5);Ease.backIn=Ease.getBackIn(1.7);Ease.backOut=Ease.getBackOut(1.7);Ease.backInOut=Ease.getBackInOut(1.7);Ease.elasticIn=Ease.getElasticIn(1,0.3);Ease.elasticOut=Ease.getElasticOut(1,0.3);Ease.elasticInOut=Ease.getElasticInOut(1,0.3*1.5);return Ease}());egret.Ease=Ease;__reflect(Ease.prototype,"egret.Ease")})(egret||(egret={}));var egret;(function(egret){var Tween=(function(_super){__extends(Tween,_super);function Tween(target,props,pluginData){var _this=_super.call(this)||this;_this._target=null;_this._useTicks=false;_this.ignoreGlobalPause=false;_this.loop=false;_this.pluginData=null;_this._steps=null;_this.paused=false;_this.duration=0;_this._prevPos=-1;_this.position=null;_this._prevPosition=0;_this._stepPosition=0;if(props){_this.timeScale=props.timeScale||1}else{_this.timeScale=1}_this.passive=false;_this.initialize(target,props,pluginData);return _this}Tween.get=function(target,props,pluginData,override){if(pluginData===void 0){pluginData=null}if(override===void 0){override=false}if(override){Tween.removeTweens(target)}return new Tween(target,props,pluginData)};Tween.removeTweens=function(target){if(!target.tween_count){return}var tweens=Tween._tweens;for(var i=tweens.length-1;i>=0;i--){if(tweens[i]._target==target){tweens[i].paused=true;tweens.splice(i,1)}}target.tween_count=0};Tween.pauseTweens=function(target){if(!target.tween_count){return}var tweens=egret.Tween._tweens;for(var i=tweens.length-1;i>=0;i--){if(tweens[i]._target==target){tweens[i].paused=true}}};Tween.resumeTweens=function(target){if(!target.tween_count){return}var tweens=egret.Tween._tweens;for(var i=tweens.length-1;i>=0;i--){if(tweens[i]._target==target){tweens[i].paused=false}}};Tween.tick=function(timeStamp,paused){if(paused===void 0){paused=false}var delta=timeStamp-Tween._lastTime;Tween._lastTime=timeStamp;var tweens=Tween._tweens.concat();for(var i=tweens.length-1;i>=0;i--){var tween_1=tweens[i];
if((paused&&!tween_1.ignoreGlobalPause)||tween_1.paused){continue}tween_1.$tick(tween_1._useTicks?1:delta)}return false};Tween._register=function(tween,value){var target=tween._target;var tweens=Tween._tweens;if(value){if(target){target.tween_count=target.tween_count>0?target.tween_count+1:1}tweens.push(tween);if(!Tween._inited){Tween._lastTime=egret.getTimer();egret.ticker.$startTick(Tween.tick,null);Tween._inited=true}}else{if(target){target.tween_count--}var i=tweens.length;while(i--){if(tweens[i]==tween){tweens.splice(i,1);return}}}};Tween.removeAllTweens=function(){var tweens=Tween._tweens;for(var i=0,l=tweens.length;i<l;i++){var tween_2=tweens[i];tween_2.paused=true;tween_2._target.tween_count=0}tweens.length=0};Tween.prototype.initialize=function(target,props,pluginData){this._target=target;if(props){this._useTicks=props.useTicks;this.ignoreGlobalPause=props.ignoreGlobalPause;this.loop=props.loop;props.onChange&&this.addEventListener("change",props.onChange,props.onChangeObj);if(props.override){Tween.removeTweens(target)}}this.pluginData=pluginData||{};this._curQueueProps={};this._initQueueProps={};this._steps=[];if(props&&props.paused){this.paused=true}else{Tween._register(this,true)}if(props&&props.position!=null){this.setPosition(props.position,Tween.NONE)}};Tween.prototype.setPosition=function(value,actionsMode){if(actionsMode===void 0){actionsMode=1}if(value<0){value=0}var t=value;var end=false;if(t>=this.duration){if(this.loop){var newTime=t%this.duration;if(t>0&&newTime===0){t=this.duration}else{t=newTime}}else{t=this.duration;end=true}}if(t==this._prevPos){return end}if(end){this.setPaused(true)}var prevPos=this._prevPos;this.position=this._prevPos=t;this._prevPosition=value;if(this._target){if(this._steps.length>0){var l=this._steps.length;var stepIndex=-1;for(var i=0;i<l;i++){if(this._steps[i].type=="step"){stepIndex=i;if(this._steps[i].t<=t&&this._steps[i].t+this._steps[i].d>=t){break}}}for(var i=0;i<l;i++){if(this._steps[i].type=="action"){if(actionsMode!=0){if(this._useTicks){this._runAction(this._steps[i],t,t)}else{if(actionsMode==1&&t<prevPos){if(prevPos!=this.duration){this._runAction(this._steps[i],prevPos,this.duration)}this._runAction(this._steps[i],0,t,true)}else{this._runAction(this._steps[i],prevPos,t)}}}}else{if(this._steps[i].type=="step"){if(stepIndex==i){var step=this._steps[stepIndex];this._updateTargetProps(step,Math.min((this._stepPosition=t-step.t)/step.d,1))}}}}}}this.dispatchEventWith("change");return end};Tween.prototype._runAction=function(action,startPos,endPos,includeStart){if(includeStart===void 0){includeStart=false}var sPos=startPos;var ePos=endPos;if(startPos>endPos){sPos=endPos;ePos=startPos}var pos=action.t;if(pos==ePos||(pos>sPos&&pos<ePos)||(includeStart&&pos==startPos)){action.f.apply(action.o,action.p)}};Tween.prototype._updateTargetProps=function(step,ratio){var p0,p1,v,v0,v1,arr;if(!step&&ratio==1){this.passive=false;p0=p1=this._curQueueProps}else{this.passive=!!step.v;if(this.passive){return}if(step.e){ratio=step.e(ratio,0,1,1)}p0=step.p0;p1=step.p1}for(var n in this._initQueueProps){if((v0=p0[n])==null){p0[n]=v0=this._initQueueProps[n]}if((v1=p1[n])==null){p1[n]=v1=v0}if(v0==v1||ratio==0||ratio==1||(typeof(v0)!="number")){v=ratio==1?v1:v0}else{v=v0+(v1-v0)*ratio}var ignore=false;if(arr=Tween._plugins[n]){for(var i=0,l=arr.length;i<l;i++){var v2=arr[i].tween(this,n,v,p0,p1,ratio,!!step&&p0==p1,!step);if(v2==Tween.IGNORE){ignore=true}else{v=v2}}}if(!ignore){this._target[n]=v}}};Tween.prototype.setPaused=function(value){if(this.paused==value){return this}this.paused=value;Tween._register(this,!value);return this};Tween.prototype._cloneProps=function(props){var o={};for(var n in props){o[n]=props[n]}return o};Tween.prototype._addStep=function(o){if(o.d>0){o.type="step";this._steps.push(o);o.t=this.duration;this.duration+=o.d}return this};Tween.prototype._appendQueueProps=function(o){var arr,oldValue,i,l,injectProps;for(var n in o){if(this._initQueueProps[n]===undefined){oldValue=this._target[n];if(arr=Tween._plugins[n]){for(i=0,l=arr.length;i<l;i++){oldValue=arr[i].init(this,n,oldValue)}}this._initQueueProps[n]=this._curQueueProps[n]=(oldValue===undefined)?null:oldValue}else{oldValue=this._curQueueProps[n]}}for(var n in o){oldValue=this._curQueueProps[n];if(arr=Tween._plugins[n]){injectProps=injectProps||{};for(i=0,l=arr.length;i<l;i++){if(arr[i].step){arr[i].step(this,n,oldValue,o[n],injectProps)}}}this._curQueueProps[n]=o[n]}if(injectProps){this._appendQueueProps(injectProps)}return this._curQueueProps};Tween.prototype._addAction=function(o){o.t=this.duration;o.type="action";this._steps.push(o);return this};Tween.prototype._set=function(props,o){for(var n in props){o[n]=props[n]}};Tween.prototype.wait=function(duration,passive){if(duration==null||duration<=0){return this}var o=this._cloneProps(this._curQueueProps);return this._addStep({d:duration,p0:o,p1:o,v:passive})};Tween.prototype.to=function(props,duration,ease){if(ease===void 0){ease=undefined}if(isNaN(duration)||duration<0){duration=0
}this._addStep({d:duration||0,p0:this._cloneProps(this._curQueueProps),e:ease,p1:this._cloneProps(this._appendQueueProps(props))});return this.set(props)};Tween.prototype.call=function(callback,thisObj,params){if(thisObj===void 0){thisObj=undefined}if(params===void 0){params=undefined}return this._addAction({f:callback,p:params?params:[],o:thisObj?thisObj:this._target})};Tween.prototype.set=function(props,target){if(target===void 0){target=null}this._appendQueueProps(props);return this._addAction({f:this._set,o:this,p:[props,target?target:this._target]})};Tween.prototype.play=function(tween){if(!tween){tween=this}return this.call(tween.setPaused,tween,[false])};Tween.prototype.pause=function(tween){if(!tween){tween=this}return this.call(tween.setPaused,tween,[true])};Tween.prototype.$tick=function(delta){if(this.paused){return}if(this.timeScale<=0){this.timeScale=0.001}this.setPosition(this._prevPosition+delta*this.timeScale*Tween.TIMESCALE)};Tween.NONE=0;Tween.LOOP=1;Tween.REVERSE=2;Tween._tweens=[];Tween.IGNORE={};Tween._plugins={};Tween.TIMESCALE=1;Tween._inited=false;Tween._lastTime=0;return Tween}(egret.EventDispatcher));egret.Tween=Tween;__reflect(Tween.prototype,"egret.Tween")})(egret||(egret={}));var egret;(function(egret){var tween;(function(tween){var BasePath=(function(_super){__extends(BasePath,_super);function BasePath(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.name="";return _this}return BasePath}(egret.EventDispatcher));tween.BasePath=BasePath;__reflect(BasePath.prototype,"egret.tween.BasePath");var To=(function(_super){__extends(To,_super);function To(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.props=undefined;_this.duration=500;_this.ease=undefined;return _this}return To}(BasePath));tween.To=To;__reflect(To.prototype,"egret.tween.To");var Wait=(function(_super){__extends(Wait,_super);function Wait(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.duration=500;_this.passive=undefined;return _this}return Wait}(BasePath));tween.Wait=Wait;__reflect(Wait.prototype,"egret.tween.Wait");var Set=(function(_super){__extends(Set,_super);function Set(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.props=undefined;return _this}return Set}(BasePath));tween.Set=Set;__reflect(Set.prototype,"egret.tween.Set");var Tick=(function(_super){__extends(Tick,_super);function Tick(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.delta=0;return _this}return Tick}(BasePath));tween.Tick=Tick;__reflect(Tick.prototype,"egret.tween.Tick");function convertEase(ease){if(typeof ease==="function"){return ease}else{var func=egret.Ease[ease];if(typeof func==="function"){return func}}return null}var TweenItem=(function(_super){__extends(TweenItem,_super);function TweenItem(){var _this=_super.call(this)||this;_this.isStop=false;return _this}Object.defineProperty(TweenItem.prototype,"props",{get:function(){return this._props},set:function(value){this._props=value},enumerable:true,configurable:true});Object.defineProperty(TweenItem.prototype,"target",{get:function(){return this._target},set:function(value){this._target=value},enumerable:true,configurable:true});Object.defineProperty(TweenItem.prototype,"paths",{get:function(){return this._paths},set:function(value){this._paths=value||[]},enumerable:true,configurable:true});TweenItem.prototype.play=function(position){if(!this.tween){this.createTween(position)}else{this.tween.setPaused(false);if(this.isStop&&position==undefined){position=0;this.isStop=false}if(position!==undefined&&position!==null){this.tween.setPosition(position)}}};TweenItem.prototype.pause=function(){if(this.tween){this.tween.setPaused(true)}};TweenItem.prototype.stop=function(){this.pause();this.isStop=true};TweenItem.prototype.createTween=function(position){this.tween=egret.Tween.get(this._target,this._props);if(this._paths){this.applyPaths()}if(position!==undefined&&position!==null){this.tween.setPosition(position)}};TweenItem.prototype.applyPaths=function(){for(var i=0;i<this._paths.length;i++){var path=this._paths[i];this.applyPath(path)}};TweenItem.prototype.applyPath=function(path){var _this=this;if(path instanceof To){this.tween.to(path.props,path.duration,convertEase(path.ease))}else{if(path instanceof Wait){this.tween.wait(path.duration,path.passive)}else{if(path instanceof Set){this.tween.set(path.props)}else{if(path instanceof Tick){this.tween.$tick(path.delta)}}}}this.tween.call(function(){return _this.pathComplete(path)})};TweenItem.prototype.pathComplete=function(path){path.dispatchEventWith("complete");this.dispatchEventWith("pathComplete",false,path);var index=this._paths.indexOf(path);if(index>=0&&index===this._paths.length-1){this.dispatchEventWith("complete")}};return TweenItem}(egret.EventDispatcher));tween.TweenItem=TweenItem;__reflect(TweenItem.prototype,"egret.tween.TweenItem");registerProperty(TweenItem,"paths","Array",true);var TweenGroup=(function(_super){__extends(TweenGroup,_super);
function TweenGroup(){var _this=_super.call(this)||this;_this.completeCount=0;return _this}Object.defineProperty(TweenGroup.prototype,"items",{get:function(){return this._items},set:function(value){this.completeCount=0;this.registerEvent(false);this._items=value;this.registerEvent(true)},enumerable:true,configurable:true});TweenGroup.prototype.registerEvent=function(add){var _this=this;this._items&&this._items.forEach(function(item){if(add){item.addEventListener("complete",_this.itemComplete,_this)}else{item.removeEventListener("complete",_this.itemComplete,_this)}})};TweenGroup.prototype.play=function(time){if(!this._items){return}for(var i=0;i<this._items.length;i++){var item=this._items[i];item.play(time)}};TweenGroup.prototype.pause=function(){if(!this._items){return}for(var i=0;i<this._items.length;i++){var item=this._items[i];item.pause()}};TweenGroup.prototype.stop=function(){if(!this._items){return}for(var i=0;i<this._items.length;i++){var item=this._items[i];item.stop()}};TweenGroup.prototype.itemComplete=function(e){var item=e.currentTarget;this.completeCount++;this.dispatchEventWith("itemComplete",false,item);if(this.completeCount===this.items.length){this.dispatchEventWith("complete");this.completeCount=0}};return TweenGroup}(egret.EventDispatcher));tween.TweenGroup=TweenGroup;__reflect(TweenGroup.prototype,"egret.tween.TweenGroup");registerProperty(TweenGroup,"items","Array",true);function registerProperty(classDefinition,property,type,asDefault){var prototype=classDefinition.prototype;prototype.__meta__=prototype.__meta__||{};prototype.__meta__[property]=type;if(asDefault){prototype.__defaultProperty__=property}}})(tween=egret.tween||(egret.tween={}))})(egret||(egret={}));